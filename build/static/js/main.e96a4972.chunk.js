(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{27:function(e,t,s){},29:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s(22),r=s.n(c),a=s(10),o=(s(27),s(4)),i=s.n(o),l=s(6),h=s(5),u=(s(29),s.p+"static/media/77218-search-imm.2fa25157.gif"),j=s(19),d="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:b},O=function(){return fetch("".concat(d,"/books"),{headers:f}).then((function(e){return e.json()})).then((function(e){return e.books}))},p=function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(j.a)(Object(j.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},x=function(e,t){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(j.a)(Object(j.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},m=s(3),k=function(e){var t=e.book,s=e.updateShelfs,n=e.shelftype;return Object(m.jsxs)("div",{className:"book",children:[Object(m.jsxs)("div",{className:"book-top",children:[t.imageLinks?Object(m.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url("+t.imageLinks.smallThumbnail+")"}}):Object(m.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url()"}}),Object(m.jsx)("div",{className:"book-shelf-changer",children:Object(m.jsxs)("select",{value:t.shelf?t.shelf:-1===n?"none":n,onChange:function(e){return function(e,t){!function(){var n=Object(l.a)(i.a.mark((function n(){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(t,e);case 2:c=n.sent,console.log(c),s();case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}(e.target.value,t)},children:[Object(m.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(m.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(m.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(m.jsx)("option",{value:"read",children:"Read"}),-1!==n&&Object(m.jsx)("option",{value:"none",children:"None"})]})})]}),Object(m.jsx)("div",{className:"book-title",children:t.title}),Object(m.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.map((function(e){return e+" "}))})]})},v=function(e){var t=e.updateShelfs,s=e.bookShelfs,c=Object(n.useState)(""),r=Object(h.a)(c,2),o=r[0],j=r[1],d=Object(n.useState)([]),b=Object(h.a)(d,2),f=b[0],O=b[1];return Object(m.jsxs)("div",{className:"search-books",children:[Object(m.jsxs)("div",{className:"search-books-bar",children:[Object(m.jsx)(a.b,{className:"close-search",to:"/",children:"Close"}),Object(m.jsx)("div",{className:"search-books-input-wrapper",children:Object(m.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:o,onChange:function(e){return function(e){j(e.trim()),function(){var t=Object(l.a)(i.a.mark((function t(){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e,10);case 2:s=t.sent,O(s);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}(e.target.value)}})})]}),Object(m.jsx)("div",{className:"search-books-results",children:Object(m.jsx)("ol",{className:"books-grid",children:""!==o&&Array.isArray(f)?f.map((function(e){var n=Array.isArray(s)&&s.findIndex((function(t){return t.id===e.id}));return Object(m.jsx)("li",{children:Object(m.jsx)(k,{shelftype:-1!==n?s[n].shelf:-1,updateShelfs:t,book:e})},e.id)})):Object(m.jsx)("img",{src:u,alt:"searchImage"})})})]})},y=function(e){var t=e.updateShelfs,s=e.bookShelfs;return Object(m.jsxs)("div",{className:"list-books",children:[Object(m.jsx)("div",{className:"list-books-title",children:Object(m.jsx)("h1",{children:"MyReads"})}),Object(m.jsx)("div",{className:"list-books-content",children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"bookshelf",children:[Object(m.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(m.jsx)("div",{className:"bookshelf-books",children:Object(m.jsx)("ol",{className:"books-grid",children:Array.isArray(s)&&s.filter((function(e){return"currentlyReading"===e.shelf})).map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(k,{updateShelfs:t,book:e})},e.id)}))})})]}),Object(m.jsxs)("div",{className:"bookshelf",children:[Object(m.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(m.jsx)("div",{className:"bookshelf-books",children:Object(m.jsx)("ol",{className:"books-grid",children:Array.isArray(s)&&s.filter((function(e){return"wantToRead"===e.shelf})).map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(k,{updateShelfs:t,book:e})},e.id)}))})})]}),Object(m.jsxs)("div",{className:"bookshelf",children:[Object(m.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(m.jsx)("div",{className:"bookshelf-books",children:Object(m.jsx)("ol",{className:"books-grid",children:Array.isArray(s)&&s.filter((function(e){return"read"===e.shelf})).map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(k,{updateShelfs:t,book:e})},e.id)}))})})]})]})}),Object(m.jsx)("div",{className:"open-search",children:Object(m.jsx)(a.b,{to:"/search",children:"Add a book"})})]})},N=s(2);var g=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),s=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,console.log(t),c(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var r=function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,console.log(t),c(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()};return Object(m.jsx)("div",{className:"app",children:Object(m.jsxs)(N.c,{children:[Object(m.jsx)(N.a,{exact:!0,path:"/",element:Object(m.jsx)(y,{bookShelfs:s,updateShelfs:r})}),Object(m.jsx)(N.a,{path:"/search",element:Object(m.jsx)(v,{bookShelfs:s,updateShelfs:r})})]})})};r.a.render(Object(m.jsx)(a.a,{children:Object(m.jsx)(g,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.e96a4972.chunk.js.map